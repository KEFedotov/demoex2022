# A1 Виртуальные машины и коммутация
## O1 hostname

Проверка на всех хостах, если соответствует Таблице 1 на всех -> **A1.O1 PASSED**

В любом другом случае -> **A1.O1 FAILED**

### Linux

    # hostname

### Windows

    > get-computerinfo -property csname

### CSR

    # show running-config | include hostname

## O2 Адресация

Проверка на всех хостах всех интерфейсов, если соответствует таблице 1 -> **A1.O2 PASSED**

В любом другом случае -> **A1.O2 FAILED**

### Linux

    # ip address show <iface> | grep 'inet '

### Windows

    > get-netipaddress | select <ip>

### CSR

    # show ip interface brief | include <ip>

# B1 Сетевая связность
## O1 Запрет прямого попадания внутреннего трафика во внешние сети

Проверка на ISP

### Linux

Запуск **tcpdump (должен быть установлен)** на интерфейсе, смотрящем на RTR

### Windows Server

Запуск **pktmon** на интерфейсе, смотрящем на RTR

Запуск пинга с внутренних машин (SRV, WEB-L, WEB-R) на соответствующий интерфейс ISP -> анализируем перехваченный трафик

### Интерпретация 

Пинг хотя бы с одной машины успешен **И** в заголовках отсутствуют внутренние адреса (192.168.100.0/24, 172.16.100.0/24) -> **B1.O1 PASSED**

В любом другом случае -> **B1.O1 FAILED**

## O2 NAT

Запуск пинга с внутренних машин (SRV, WEB-L, WEB-R) на соответствующий интерфейс ISP

### RTR - Cisco

На соответствующем RTR

    # show ip nat translations

### Интерпретация

Пинг хотя бы с одной машины успешен **И** в выводе преобразования есть запись: внешний IP RTR - IP внутренней машины -> **B1.O2 PASSED**

В любом другом случае -> **B1.O2 FAILED**

## O3 Наличие туннеля между платформами

### RTR - Cisco

С RTR-L запускаем traceroute на внутренний IP RTR-R

    # traceroute <ip>

### Интерпретация

Traceroute успешен **И** не содержит IP-адресов ISP -> **B1.O3 PASSED**

В любом другом случае -> **B1.O3 FAILED**

## O4 Туннель между платформами защищен

На ISP запускаем tcpdump на интерфейсе, смотрящем на RTR-L

С RTR-L запускаем ping на внутренний IP RTR-R

    # ping <ip>

### Интерпретация

Если ping успешен **И** в выводе tcpdump нет строки 'ICMP echo' -> **B1.O4 PASSED**

В любом другом случае -> **B1.O4 FAILED**

## O5 Трафик во внешние сети проходит без использования туннеля

С любой внутренней машины запускаем трассировку CLI

### Linux

    # traceroute <cli-ip>

### Windows

    > tracert <cli-ip>

### Интепретация

Если трассировка успешна **И** в выводе присутствует IP-адрес ISP -> **B1.O5 PASSED**

В любом другом случае -> **B1.O5 FAILED**

## O6 Трафик во внешние сети проходит без использования туннеля

С любой внутренней машины LEFT запускаем трассировку WEB-R

### Linux

    # traceroute <web-r-ip>

### Windows

    > tracert <web-r-ip>

### Интепретация

Если трассировка успешна **И** в выводе отсутствует любой из IP-адресов ISP -> **B1.O6 PASSED**

В любом другом случае -> **B1.O6 FAILED**

## O7 Трафик, идущий по туннелю не транслируется


### RTR - Cisco

На RTR-L очищаем таблицу NAT

    # clear ip nat translation *

С любой внутренней машины LEFT запускаем ping внутреннего интерфейса RTR-R

На RTR-L проверяем таблицу NAT

    # show ip nat translations

### Интерпретация

Если ping успешен **И** в выводе таблицы нет преобразования внутреннего IP машины во внешний RTR-L -> **B1.07 PASSED**

В любом другом случае -> **B1.O7 FAILED**




